---
layout:     post
title:      使用vue3.0.0全家桶重构vue2.6.1的一个商城demo！🔥
subtitle:   vue3.0.0
date:       2021-1-3 22:03:16
author:     gankai
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - vue3全家桶
    - 开源框架
---

<section id="nice" data-tool="mdnice编辑器" data-website="https://www.mdnice.com" style="font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;"><hr data-tool="mdnice编辑器" style="margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #3BAAFA;">
<h1 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 25px;"><span class="prefix" style="font-weight: bold; color: #40B8FA; display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; color: #40B8FA;">vue3-jd-h5</span><span class="suffix" style="display: inline-block; font-weight: bold; color: #40B8FA;"></span></h1>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在vue的Composition API刚发布的时候，写了一篇<a href="https://juejin.cn/post/6844904146785533959" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">基于vue3.0.1 beta，搭建仿京东的电商H5项目！</a>的文章,介绍了vue的一些新特性，如今正式版本已经发布了，今年乘着有时间，开始使用最新的vue全家桶来进行重构！其他基础使用就直接略过了，不懂的可以直接看<a href="https://v3.cn.vuejs.org/" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">中文官网</a>的例子或者我<a href="https://juejin.cn/post/6844904146785533959" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">之前那篇文章</a>!</p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">项目介绍</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;"><code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">vue3-jd-h5</code>是一个电商H5页面前端项目，从vue2.6.1过度到vue3.0.0进行重构，基于<strong style="color: #3594F7; font-weight: bold;"><span>「</span>Vue 3.0.0全家桶<span>」</span></strong> ➕ <strong style="color: #3594F7; font-weight: bold;"><span>「</span>Vant 3.0.0<span>」</span></strong> 实现！</p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">📖本地线下代码<strong style="color: #3594F7; font-weight: bold;"><span>「</span>vue2.6<span>」</span></strong>在分支<a target="_blank" href="https://github.com/GitHubGanKai/vue-jd-h5/blob/demo/README.md" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">demo</a>中，使用<strong style="color: #3594F7; font-weight: bold;"><span>「</span>mockjs<span>」</span></strong>数据进行开发，效果图请点击🔗<a target="_blank" href="http://gankai.gitee.io/vue-jd-h5/index" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">这里</a></p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">⚠️master分支是线上生产环境代码，因为部分后台接口已经挂了😫，可能无法看到实际效果。</p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">📌 本项目还有很多不足之处，如果有想为此做贡献的伙伴，也欢迎给我们提出PR，或者issue ；</p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">🔑 本项目是免费开源的，如果有伙伴想要在次基础上进行二次开发，可以clone或者fork整个仓库，如果能帮助到您，我将感到非常高兴，如果您觉得这个项目不错还请给个start！🙏</p>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">开始搭建</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<ol data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">首先,在本地选择一个文件，将代码clone到本地：</section></li></ol>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;">git&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">clone</span>&nbsp;https://github.com/GitHubGanKai/vue-jd-h5.git&nbsp;<br></code></pre>
<ol start="2" data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;"><p style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">👉切换到分支<strong style="color: #3594F7; font-weight: bold;"><span>「</span>vue-next<span>」</span></strong>开始进行体验（目前正在逐步重构中）！👈</p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;"><p style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在 IDEA 命令行中运行命令：<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">npm install</code>下载安装相关依赖;</p>
</section></li></ol>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">安装vue全家桶</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>配置安装<code>vue-router</code></span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/router/index.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;createRouter,&nbsp;createWebHistory&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue-router'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;indexRouter&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/'</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">component</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>(<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/views/index'</span>),<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">redirect</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/index'</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">children</span>:&nbsp;[]<br>}<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;routes&nbsp;=&nbsp;[<br>&nbsp;&nbsp;indexRouter,<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/nopermission'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'nopermission'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">meta</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">index</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">component</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>(<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/views/error/NoPermission'</span>)<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/*'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'404'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">meta</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">index</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">component</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>(<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/views/error/404'</span>)<br>&nbsp;&nbsp;},<br>]<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;routerContext&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'./modules'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>,&nbsp;/\.js$/)<br>routerContext.keys().forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">route</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;routerModule&nbsp;=&nbsp;routerContext(route)<br>&nbsp;&nbsp;indexRouter.children&nbsp;=&nbsp;[...indexRouter.children,&nbsp;...(routerModule.default&nbsp;||&nbsp;routerModule)]<br>})<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;createRouter({<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">history</span>:&nbsp;createWebHistory(process.env.BASE_URL),<br>&nbsp;&nbsp;routes<br>})<br><br></code></pre>
<h4 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span>使用<code>useRouter</code>hooks可以获取路由对象：</span><span class="suffix" style="display: none;"></span></h4>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;onMounted&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useRouter,&nbsp;useRoute&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue-router"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"home"</span>,<br>&nbsp;&nbsp;setup(props,&nbsp;context)&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$router&nbsp;=&nbsp;useRouter();<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;handleClick&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">id</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$router.push(<span class="hljs-string" style="color: #d14; line-height: 26px;">`/classify/product/<span class="hljs-subst" style="color: #333; font-weight: normal; line-height: 26px;">${id}</span>`</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleClick,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br><br></code></pre>
<h4 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span>使用<code>useRoute</code>获取路由参数对象</span><span class="suffix" style="display: none;"></span></h4>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;onMounted&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useRoute&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue-router"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"home"</span>,<br>&nbsp;&nbsp;setup(props,&nbsp;context)&nbsp;{<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;可以拿到所有和路由相关的参数</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;和useRouter()就差一个字母r，😅</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$route&nbsp;=&nbsp;useRoute();&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">async</span>&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;data&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">await</span>&nbsp;ctx.$http.get(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">`http://test.happymmall.com/product/<span class="hljs-subst" style="color: #333; font-weight: normal; line-height: 26px;">${$route.params.id}</span>`</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$route,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>配置安装vuex</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/store/index.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;createStore&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vuex'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;cart&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./modules/cart'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;search&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./modules/search'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;createStore({<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">modules</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;cart,<br>&nbsp;&nbsp;&nbsp;&nbsp;search<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">strict</span>:&nbsp;process.env.NODE_ENV&nbsp;!==&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'production'</span><br>})<br><br></code></pre>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在文件中使用如下：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useStore&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vuex"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;reactive,&nbsp;getCurrentInstance&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><br>setup(props,&nbsp;context)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$store&nbsp;=&nbsp;useStore();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ctx.$store&nbsp;===&nbsp;$store&nbsp;&nbsp;==&gt;true&nbsp;其实是同一个对象！</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;ball&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">show</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">el</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">""</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;addToCart&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">event,&nbsp;tag</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$store.commit(<span class="hljs-string" style="color: #d14; line-height: 26px;">"cart/addToCart"</span>,&nbsp;tag);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ball.show&nbsp;=&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ball.el&nbsp;=&nbsp;event.target;<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...toRefs(ball),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addToCart,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br></code></pre>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在入口文件<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">main.js</code>中使用：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;createApp&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;App&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./App.vue'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;router&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./router'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;store&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./store'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'lib-flexible/flexible'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;Vant&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vant'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vant/lib/index.css'</span>&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;全局引入样式</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;app&nbsp;=&nbsp;createApp(App);<br>app.use(Vant).use(store).use(router).mount(<span class="hljs-string" style="color: #d14; line-height: 26px;">'#app'</span>);<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>使用<code>svg-sprite-loader</code>处理svg文件</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">首先在<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">vue.config.js</code>中配置<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">svg-sprite-loader</code>:</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;">module.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;chainWebpack:&nbsp;config&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;svgRule&nbsp;=&nbsp;config.module.rule(<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;svgRule.uses.clear();<br>&nbsp;&nbsp;&nbsp;&nbsp;svgRule<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.use(<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-sprite-loader"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.loader(<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-sprite-loader"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.options({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symbolId:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"icon-[name]"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.end();<br>&nbsp;&nbsp;},<br>}<br></code></pre>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">src/components/SvgIcon/index.vue</code>中:</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;computed,&nbsp;toRefs,&nbsp;toRef&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-icon"</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">props</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">iconClass</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">type</span>:&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">String</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">required</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">className</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">type</span>:&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup(initProps)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;const&nbsp;{&nbsp;iconClass&nbsp;}&nbsp;=&nbsp;initProps;❌</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;因为&nbsp;props&nbsp;是响应式的，你不能使用&nbsp;ES6&nbsp;解构，因为它会消除&nbsp;prop&nbsp;的响应性。</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;如果需要解构&nbsp;prop，可以通过使用&nbsp;setup&nbsp;函数中的&nbsp;toRefs&nbsp;来完成此操作：</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;iconClass&nbsp;}&nbsp;=&nbsp;toRefs(initProps);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;iconName&nbsp;=&nbsp;computed(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">`#icon-<span class="hljs-subst" style="color: #333; font-weight: normal; line-height: 26px;">${iconClass.value}</span>`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;由于&nbsp;className&nbsp;是可选的&nbsp;prop，则传入的&nbsp;props&nbsp;中可能没有&nbsp;className&nbsp;。</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;在这种情况下，toRefs&nbsp;将不会为&nbsp;className&nbsp;创建一个&nbsp;ref&nbsp;，需要使用&nbsp;toRef&nbsp;替代它。</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;className&nbsp;=&nbsp;toRef(initProps,&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"className"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;svgClass&nbsp;=&nbsp;computed(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(className)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-icon&nbsp;"</span>&nbsp;+&nbsp;className.value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-icon"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconName,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svgClass<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">将这个写成一个插件，统一将所有的svg文件注册成组件的形式方便全局使用！</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/icons/index.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;SvgIcon&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/components/SvgIcon'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;requireAll&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">requireContext</span>&nbsp;=&gt;</span>&nbsp;requireContext.keys().map(requireContext)<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;app.component(<span class="hljs-string" style="color: #d14; line-height: 26px;">'svg-icon'</span>,&nbsp;SvgIcon);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;req&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'./svgs/'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>,&nbsp;/\.svg$/)<br>&nbsp;&nbsp;&nbsp;&nbsp;requireAll(req)<br>&nbsp;&nbsp;}<br>}<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>统一注册所有组件</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">src/components/index.js</code>文件中：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">capitalizeFirstLetter</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;str.charAt(<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>).toUpperCase()&nbsp;+&nbsp;str.slice(<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)<br>}<br><br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">validateFileName</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\.vue$/</span>.test(str)&nbsp;&amp;&amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;str.replace(<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\/(\w+)\.vue$/</span>,&nbsp;(rs,&nbsp;$<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)&nbsp;=&gt;&nbsp;capitalizeFirstLetter($<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>))<br>}<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;requireComponent&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'.'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>,&nbsp;/\.vue$/)<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;requireComponent.keys().forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">filePath</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentConfig&nbsp;=&nbsp;requireComponent(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;fileName&nbsp;=&nbsp;validateFileName(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentName&nbsp;=&nbsp;fileName.toLowerCase()&nbsp;===&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'index'</span>&nbsp;?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capitalizeFirstLetter(componentConfig.default.name)&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.component(componentName,&nbsp;componentConfig.default&nbsp;||&nbsp;componentConfig)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;}<br>}<br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">capitalizeFirstLetter</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;str.charAt(<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>).toUpperCase()&nbsp;+&nbsp;str.slice(<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)<br>}<br><br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">validateFileName</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\.vue$/</span>.test(str)&nbsp;&amp;&amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;str.replace(<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\/(\w+)\.vue$/</span>,&nbsp;(rs,&nbsp;$<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)&nbsp;=&gt;&nbsp;capitalizeFirstLetter($<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>))<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;requireComponent&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'.'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>,&nbsp;/\.vue$/)<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;requireComponent.keys().forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">filePath</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentConfig&nbsp;=&nbsp;requireComponent(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;fileName&nbsp;=&nbsp;validateFileName(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentName&nbsp;=&nbsp;fileName.toLowerCase()&nbsp;===&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'index'</span>&nbsp;?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capitalizeFirstLetter(componentConfig.default.name)&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.component(componentName,&nbsp;componentConfig.default&nbsp;||&nbsp;componentConfig)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;}<br>}<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>配置全局<code>axios</code>封装异步请求：</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/plugins/axios.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;axios&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'axios'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;router&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'../router/index'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;Toast&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vant'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;tip&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">msg</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;Toast({<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">message</span>:&nbsp;msg,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">duration</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1000</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">forbidClick</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span><br>&nbsp;&nbsp;})<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;errorHandle&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">status,&nbsp;other</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">switch</span>&nbsp;(status)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">case</span>&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">401</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toLogin()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">case</span>&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">403</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tip(<span class="hljs-string" style="color: #d14; line-height: 26px;">'登录过期，请重新登录'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(<span class="hljs-string" style="color: #d14; line-height: 26px;">'token'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toLogin()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1000</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">case</span>&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">404</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tip(<span class="hljs-string" style="color: #d14; line-height: 26px;">'请求的资源不存在'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">default</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">console</span>.log(other)<br>&nbsp;&nbsp;}<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;instance&nbsp;=&nbsp;axios.create({<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">baseURL</span>:&nbsp;process.env.VUE_APP_BASE_URL,<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;baseURL:&nbsp;'',</span><br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">timeout</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1000</span>&nbsp;*&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">12</span><br>})<br>instance.defaults.headers.post[<span class="hljs-string" style="color: #d14; line-height: 26px;">'Content-Type'</span>]&nbsp;=&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'application/x-www-form-urlencoded;charset=UTF-8'</span><br>instance.interceptors.request.use(<br>&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">config</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;token&nbsp;=&nbsp;localStorage.token<br>&nbsp;&nbsp;&nbsp;&nbsp;token&nbsp;&amp;&amp;&nbsp;(config.headers.token&nbsp;=&nbsp;token)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;config<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;error&nbsp;=&gt;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.error(error))<br><br><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;响应拦截器</span><br>instance.interceptors.response.use(<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;请求成功</span><br>&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">response</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;response.status&nbsp;===&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">200</span>&nbsp;?&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.resolve(response)&nbsp;:&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.reject(response)<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;请求失败</span><br>&nbsp;&nbsp;error&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;=&nbsp;error<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(response)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;请求已发出，但是不在2xx的范围</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorHandle(response.status,&nbsp;response.data.message)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.reject(response)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;})<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;这可以代替&nbsp;Vue&nbsp;2.x&nbsp;Vue.prototype&nbsp;在单文件中，可以这样使用：</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;const&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ctx.$http访问</span><br>&nbsp;&nbsp;&nbsp;&nbsp;app.config.globalProperties.$http&nbsp;=&nbsp;instance<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>封装全局eventBus</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">2.x</code>中，<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">Vue</code> 实例可用于触发由事件触发 API 通过指令式方式添加的处理函数 (<span class="span-inline-equation" style="cursor:pointer"><img class="Formula-image" data-eeimg="true" src alt="on，" style="max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;"></span>off 和 $once)。这可以创建 event hub，用来创建在整个应用程序中可用的全局事件监听器：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/utils/eventBus.js</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;eventBus&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">new</span>&nbsp;Vue()<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;eventBus<br></code></pre>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;"><code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">3.x</code>从实例中完全移除了 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$on</code>、<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$off</code> 和 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$once</code> 方法。<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$emit</code> 仍然包含于现有的 API 中，因为它用于触发由父组件声明式添加的事件处理函数。
可以使用实现了事件触发接口的外部库来替换现有的 event hub，例如 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">mitt</code> 或 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">tiny-emitter</code>。</p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">所以需要在<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">2.x</code>的基础上进行自我改造(没有使用 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">mitt</code> 或 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">tiny-emitter</code>):</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;getCurrentInstance&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue'</span><br><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="color: #458; font-weight: bold; line-height: 26px;">EventBus</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">constructor</span>(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(!<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Object</span>.defineProperty(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>,&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'handles'</span>,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">value</span>:&nbsp;{},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">enumerable</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.app&nbsp;=&nbsp;app<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;_uid和EventName的映射</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid&nbsp;=&nbsp;{}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;setEventMapUid(uid,&nbsp;eventName)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(!<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid]&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid].push(eventName)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;把每个_uid订阅的事件名字push到各自uid所属的数组里</span><br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$on(eventName,&nbsp;callback,&nbsp;vm)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;vm是在组件内部使用时组件当前的this用于取_uid</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(!<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName]&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName].push(callback)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.setEventMapUid(vm._uid,&nbsp;eventName)<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$emit()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;args&nbsp;=&nbsp;[...arguments]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;eventName&nbsp;=&nbsp;args[<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;params&nbsp;=&nbsp;args.slice(<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;len&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName].length<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">for</span>&nbsp;(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;i&nbsp;=&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>;&nbsp;i&nbsp;&lt;&nbsp;len;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName][i](...params)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$offVmEvent(uid)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;currentEvents&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid]&nbsp;||&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;currentEvents.forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">event</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.$off(event)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$off(eventName)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">delete</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName]<br>&nbsp;&nbsp;}<br>}<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;$EventBus&nbsp;=&nbsp;{}<br>$EventBus.install&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">app</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;app.config.globalProperties.$eventBus&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">new</span>&nbsp;EventBus(app)<br>&nbsp;&nbsp;app.mixin({<br>&nbsp;&nbsp;&nbsp;&nbsp;beforeUnmount()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;currentInstance&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;拦截beforeUnmount钩子,自动销毁自身所有订阅的事件</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.$eventBus.$offVmEvent(currentInstance._uid)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;})<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;$EventBus<br></code></pre>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">src/views/classify/index.vue</code>文件中使用如下：</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;ListScroll&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"@/components/scroll/ListScroll"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;ref,&nbsp;reactive,&nbsp;onMounted,&nbsp;toRefs,&nbsp;getCurrentInstance&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useRouter&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue-router"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"classify"</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">components</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;ListScroll<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$router&nbsp;=&nbsp;useRouter();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;searchWrap&nbsp;=&nbsp;ref(<span class="hljs-literal" style="color: #008080; line-height: 26px;">null</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;state&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">categoryDatas</span>:&nbsp;[],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">currentIndex</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;selectMenu&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">index</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.currentIndex&nbsp;=&nbsp;index;<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;setSearchWrapHeight&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;clientHeight&nbsp;}&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">document</span>.documentElement;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchWrap.value.style.height&nbsp;=&nbsp;clientHeight&nbsp;-&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">100</span>&nbsp;+&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"px"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;selectProduct&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">sku</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$router.push({&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"/classify/recommend"</span>,&nbsp;<span class="hljs-attr" style="line-height: 26px;">query</span>:&nbsp;{&nbsp;sku&nbsp;}&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">async</span>&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSearchWrapHeight();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;使用全局注过的$eventBus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctx.$eventBus.$emit(<span class="hljs-string" style="color: #d14; line-height: 26px;">"changeTag"</span>,&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;使用全局注册过的$http</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;data&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">await</span>&nbsp;ctx.$http.get(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"http://test.happymmall.com/category/categoryData"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;categoryData&nbsp;}&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.categoryDatas&nbsp;=&nbsp;categoryData;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchWrap,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...toRefs(state),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectProduct,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectMenu<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>封装个简单的hooks：<code>useClickOutside</code></span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/hooks/useClickOutside.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;onMounted,&nbsp;onUnmounted,&nbsp;ref&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;useClickOutSide&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">domRef</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;isOutside&nbsp;=&nbsp;ref(<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>);<br><br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;handler&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">event</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(domRef.value)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(domRef.value.contains(event.target))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isOutside.value&nbsp;=&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isOutside.value&nbsp;=&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;onMounted(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">document</span>.addEventListener(<span class="hljs-string" style="color: #d14; line-height: 26px;">'click'</span>,&nbsp;handler);<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;onUnmounted(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">document</span>.removeEventListener(<span class="hljs-string" style="color: #d14; line-height: 26px;">'click'</span>,&nbsp;handler);<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;isOutside;<br>}<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>使用 this</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">在 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> 内部，<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">this</code> 不会是该活跃实例的引用，因为 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> 是在解析其它组件选项之前被调用的，所以 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> 内部的 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">this</code> 的行为与其它选项中的 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">this</code> 完全不同。这在和其它选项式 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">API</code> 一起使用 <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> 时可能会导致混淆。</p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">可以通过<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">getCurrentInstance</code>获取当前单个文件组件的实例，同时<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">ctx</code>上面挂在了一些全局属性:</p>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;getCurrentInstance,&nbsp;&nbsp;onMounted,&nbsp;reactive,&nbsp;toRefs&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"classify"</span>,<br>&nbsp;&nbsp;setup(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;state&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">categoryDatas</span>:&nbsp;[],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">currentIndex</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">async</span>&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;data&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">await</span>&nbsp;ctx.$http.get(<span class="hljs-string" style="color: #d14; line-height: 26px;">"http://test.happymmall.com/category/categoryData"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;categoryData,&nbsp;page&nbsp;}&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.categoryDatas&nbsp;=&nbsp;categoryData;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.currentIndex&nbsp;=&nbsp;page;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...toRefs(state)<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdnice编辑器" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>📦 封装better-scroll</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdnice编辑器" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;">&lt;template&gt;<br>&nbsp;&nbsp;<span class="xml" style="line-height: 26px;"><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">div</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">ref</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"wrapper"</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">class</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"scroll-wrapper"</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">slot</span>&gt;</span><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;/<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">slot</span>&gt;</span><br>&nbsp;&nbsp;<span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;/<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">div</span>&gt;</span></span><br>&lt;<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/template&gt;<br>&lt;script&gt;<br>import&nbsp;BScroll&nbsp;from&nbsp;"better-scroll";<br>import&nbsp;{&nbsp;onMounted,&nbsp;nextTick,&nbsp;ref,&nbsp;watchEffect&nbsp;}&nbsp;from&nbsp;"vue";<br>export&nbsp;default&nbsp;{<br>&nbsp;&nbsp;props:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;probeType:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;click:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;true<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;scrollX:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;listenScroll:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;scrollData:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Array,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;null<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;pullup:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;pulldown:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;beforeScroll:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;refreshDelay:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;20<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup(props,&nbsp;setupContext)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;wrapper&nbsp;=&nbsp;ref(null);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;initScroll&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!wrapper.value)&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;scroll&nbsp;=&nbsp;new&nbsp;BScroll(wrapper.value,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;probeType:&nbsp;props.probeType,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;click:&nbsp;props.click,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scrollX:&nbsp;props.scrollX<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;是否派发滚动事件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.listenScroll)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("scroll",&nbsp;pos&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("scroll",&nbsp;pos);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;是否派发滚动到底部事件，用于上拉加载<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.pullup)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("scrollEnd",&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;滚动到底部<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(scroll.y&nbsp;&lt;=&nbsp;scroll.maxScrollY&nbsp;+&nbsp;50)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("scrollToEnd");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;是否派发顶部下拉事件，用于下拉刷新<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.pulldown)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("touchend",&nbsp;pos&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;下拉动作<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pos.y&nbsp;&gt;&nbsp;50)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("pulldown");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;是否派发列表滚动开始的事件<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.beforeScroll)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("beforeScrollStart",&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("beforeScroll");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;disable&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;代理better-scroll的disable方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.disable();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;enable&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;代理better-scroll的enable方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.enable();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;refresh&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;代理better-scroll的refresh方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.refresh();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;scrollTo&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;代理better-scroll的scrollTo方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.scrollTo.apply(scroll,&nbsp;arguments);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;scrollToElement&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;代理better-scroll的scrollToElement方法<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.scrollToElement.apply(scroll,&nbsp;arguments);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;onMounted(()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextTick(()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initScroll();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{};<br>&nbsp;&nbsp;}<br>};<br>&lt;/</span>script&gt;<br><span class="xml" style="line-height: 26px;"><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">style</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">lang</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"scss"</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">type</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"text/scss"</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">scoped</span>&gt;</span><span class="css" style="line-height: 26px;"><br><span class="hljs-selector-class" style="line-height: 26px;">.scroll-wrapper</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">width</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">100%</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">height</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">100%</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">overflow</span>:&nbsp;hidden;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">overflow-y</span>:&nbsp;scroll;<br>}<br></span><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;/<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">style</span>&gt;</span></span><br><br></code></pre>
<h2 data-tool="mdnice编辑器" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">未完待续。。。</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">由于时间关系先写到这里了，明天还要上班，这个项目仅仅只是用来练习vue3用的小demo，里面还有部分的🐛，随时欢迎各位小伙伴提出分享意见！github代码点击<a href="https://github.com/GitHubGanKai/vue3-jd-h5" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">这里</a>。</p>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">❤️ 看完三件事:
如果你觉得这篇内容对你挺有启发，我想邀请你帮我个小忙：</p><p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;"></p>
<ol data-tool="mdnice编辑器" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">点赞，让更多的人也能看到这篇内容，也方便自己随时找到这篇内容（收藏不点赞，都是耍流氓 -_-）；</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">关注我们，不定期分好文章；</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">也看看其它文章；</section></li></ol>
<p data-tool="mdnice编辑器" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">🎉欢迎你把自己的学习体会写在留言区，与我和其他同学一起讨论。如果你觉得有所收获，也欢迎把文章分享给你的朋友。</p>
</section>