---
layout:     post
title:      ä½¿ç”¨vue3.0.0å…¨å®¶æ¡¶é‡æ„vue2.6.1çš„ä¸€ä¸ªå•†åŸdemoï¼ğŸ”¥
subtitle:   vue3.0.0
date:       2021-1-3 22:03:16
author:     gankai
header-img: img/post-bg-ios9-web.jpg
catalog: true
tags:
    - vue3å…¨å®¶æ¡¶
    - å¼€æºæ¡†æ¶
---

<section id="nice" data-tool="mdniceç¼–è¾‘å™¨" data-website="https://www.mdnice.com" style="font-size: 16px; padding: 0 10px; word-spacing: 0px; word-break: break-word; word-wrap: break-word; text-align: left; line-height: 1.25; color: #2b2b2b; font-family: Optima-Regular, Optima, PingFangTC-Light, PingFangSC-light, PingFangTC-light; letter-spacing: 2px; background-image: linear-gradient(90deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%), linear-gradient(360deg, rgba(50, 0, 0, 0.04) 3%, rgba(0, 0, 0, 0) 3%); background-size: 20px 20px; background-position: center center;"><hr data-tool="mdniceç¼–è¾‘å™¨" style="margin: 0; margin-top: 10px; margin-bottom: 10px; height: 1px; padding: 0; border: none; border-top: 2px solid #3BAAFA;">
<h1 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 25px;"><span class="prefix" style="font-weight: bold; color: #40B8FA; display: none;"></span><span class="content" style="display: inline-block; font-weight: bold; color: #40B8FA;">vue3-jd-h5</span><span class="suffix" style="display: inline-block; font-weight: bold; color: #40B8FA;"></span></h1>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨vueçš„Composition APIåˆšå‘å¸ƒçš„æ—¶å€™ï¼Œå†™äº†ä¸€ç¯‡<a href="https://juejin.cn/post/6844904146785533959" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">åŸºäºvue3.0.1 betaï¼Œæ­å»ºä»¿äº¬ä¸œçš„ç”µå•†H5é¡¹ç›®ï¼</a>çš„æ–‡ç« ,ä»‹ç»äº†vueçš„ä¸€äº›æ–°ç‰¹æ€§ï¼Œå¦‚ä»Šæ­£å¼ç‰ˆæœ¬å·²ç»å‘å¸ƒäº†ï¼Œä»Šå¹´ä¹˜ç€æœ‰æ—¶é—´ï¼Œå¼€å§‹ä½¿ç”¨æœ€æ–°çš„vueå…¨å®¶æ¡¶æ¥è¿›è¡Œé‡æ„ï¼å…¶ä»–åŸºç¡€ä½¿ç”¨å°±ç›´æ¥ç•¥è¿‡äº†ï¼Œä¸æ‡‚çš„å¯ä»¥ç›´æ¥çœ‹<a href="https://v3.cn.vuejs.org/" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">ä¸­æ–‡å®˜ç½‘</a>çš„ä¾‹å­æˆ–è€…æˆ‘<a href="https://juejin.cn/post/6844904146785533959" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">ä¹‹å‰é‚£ç¯‡æ–‡ç« </a>!</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">é¡¹ç›®ä»‹ç»</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;"><code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">vue3-jd-h5</code>æ˜¯ä¸€ä¸ªç”µå•†H5é¡µé¢å‰ç«¯é¡¹ç›®ï¼Œä»vue2.6.1è¿‡åº¦åˆ°vue3.0.0è¿›è¡Œé‡æ„ï¼ŒåŸºäº<strong style="color: #3594F7; font-weight: bold;"><span>ã€Œ</span>Vue 3.0.0å…¨å®¶æ¡¶<span>ã€</span></strong> â• <strong style="color: #3594F7; font-weight: bold;"><span>ã€Œ</span>Vant 3.0.0<span>ã€</span></strong> å®ç°ï¼</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">ğŸ“–æœ¬åœ°çº¿ä¸‹ä»£ç <strong style="color: #3594F7; font-weight: bold;"><span>ã€Œ</span>vue2.6<span>ã€</span></strong>åœ¨åˆ†æ”¯<a target="_blank" href="https://github.com/GitHubGanKai/vue-jd-h5/blob/demo/README.md" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">demo</a>ä¸­ï¼Œä½¿ç”¨<strong style="color: #3594F7; font-weight: bold;"><span>ã€Œ</span>mockjs<span>ã€</span></strong>æ•°æ®è¿›è¡Œå¼€å‘ï¼Œæ•ˆæœå›¾è¯·ç‚¹å‡»ğŸ”—<a target="_blank" href="http://gankai.gitee.io/vue-jd-h5/index" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">è¿™é‡Œ</a></p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">âš ï¸masteråˆ†æ”¯æ˜¯çº¿ä¸Šç”Ÿäº§ç¯å¢ƒä»£ç ï¼Œå› ä¸ºéƒ¨åˆ†åå°æ¥å£å·²ç»æŒ‚äº†ğŸ˜«ï¼Œå¯èƒ½æ— æ³•çœ‹åˆ°å®é™…æ•ˆæœã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">ğŸ“Œ æœ¬é¡¹ç›®è¿˜æœ‰å¾ˆå¤šä¸è¶³ä¹‹å¤„ï¼Œå¦‚æœæœ‰æƒ³ä¸ºæ­¤åšè´¡çŒ®çš„ä¼™ä¼´ï¼Œä¹Ÿæ¬¢è¿ç»™æˆ‘ä»¬æå‡ºPRï¼Œæˆ–è€…issue ï¼›</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">ğŸ”‘ æœ¬é¡¹ç›®æ˜¯å…è´¹å¼€æºçš„ï¼Œå¦‚æœæœ‰ä¼™ä¼´æƒ³è¦åœ¨æ¬¡åŸºç¡€ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼Œå¯ä»¥cloneæˆ–è€…forkæ•´ä¸ªä»“åº“ï¼Œå¦‚æœèƒ½å¸®åŠ©åˆ°æ‚¨ï¼Œæˆ‘å°†æ„Ÿåˆ°éå¸¸é«˜å…´ï¼Œå¦‚æœæ‚¨è§‰å¾—è¿™ä¸ªé¡¹ç›®ä¸é”™è¿˜è¯·ç»™ä¸ªstartï¼ğŸ™</p>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">å¼€å§‹æ­å»º</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<ol data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">é¦–å…ˆ,åœ¨æœ¬åœ°é€‰æ‹©ä¸€ä¸ªæ–‡ä»¶ï¼Œå°†ä»£ç cloneåˆ°æœ¬åœ°ï¼š</section></li></ol>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;">git&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">clone</span>&nbsp;https://github.com/GitHubGanKai/vue-jd-h5.git&nbsp;<br></code></pre>
<ol start="2" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;"><p style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">ğŸ‘‰åˆ‡æ¢åˆ°åˆ†æ”¯<strong style="color: #3594F7; font-weight: bold;"><span>ã€Œ</span>vue-next<span>ã€</span></strong>å¼€å§‹è¿›è¡Œä½“éªŒï¼ˆç›®å‰æ­£åœ¨é€æ­¥é‡æ„ä¸­ï¼‰ï¼ğŸ‘ˆ</p>
</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;"><p style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨ IDEA å‘½ä»¤è¡Œä¸­è¿è¡Œå‘½ä»¤ï¼š<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">npm install</code>ä¸‹è½½å®‰è£…ç›¸å…³ä¾èµ–;</p>
</section></li></ol>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">å®‰è£…vueå…¨å®¶æ¡¶</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>é…ç½®å®‰è£…<code>vue-router</code></span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/router/index.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;createRouter,&nbsp;createWebHistory&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue-router'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;indexRouter&nbsp;=&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/'</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">component</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>(<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/views/index'</span>),<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">redirect</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/index'</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">children</span>:&nbsp;[]<br>}<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;routes&nbsp;=&nbsp;[<br>&nbsp;&nbsp;indexRouter,<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/nopermission'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'nopermission'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">meta</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">index</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">component</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>(<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/views/error/NoPermission'</span>)<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'/*'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'404'</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">meta</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">index</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">component</span>:&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>(<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/views/error/404'</span>)<br>&nbsp;&nbsp;},<br>]<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;routerContext&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'./modules'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>,&nbsp;/\.js$/)<br>routerContext.keys().forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">route</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;routerModule&nbsp;=&nbsp;routerContext(route)<br>&nbsp;&nbsp;indexRouter.children&nbsp;=&nbsp;[...indexRouter.children,&nbsp;...(routerModule.default&nbsp;||&nbsp;routerModule)]<br>})<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;createRouter({<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">history</span>:&nbsp;createWebHistory(process.env.BASE_URL),<br>&nbsp;&nbsp;routes<br>})<br><br></code></pre>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span>ä½¿ç”¨<code>useRouter</code>hookså¯ä»¥è·å–è·¯ç”±å¯¹è±¡ï¼š</span><span class="suffix" style="display: none;"></span></h4>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;onMounted&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useRouter,&nbsp;useRoute&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue-router"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"home"</span>,<br>&nbsp;&nbsp;setup(props,&nbsp;context)&nbsp;{<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$router&nbsp;=&nbsp;useRouter();<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;handleClick&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">id</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$router.push(<span class="hljs-string" style="color: #d14; line-height: 26px;">`/classify/product/<span class="hljs-subst" style="color: #333; font-weight: normal; line-height: 26px;">${id}</span>`</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;handleClick,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br><br></code></pre>
<h4 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 18px;"><span class="prefix" style="display: none;"></span><span class="content" style="height: 16px; line-height: 16px; font-size: 16px;"><span style="background-image: url(https://files.mdnice.com/fullstack-3.png); display: inline-block; width: 16px; height: 16px; background-size: 100%; background-position: left bottom; background-repeat: no-repeat; width: 16px; height: 15px; line-height: 15px; margin-right: 6px; margin-bottom: -2px;"></span>ä½¿ç”¨<code>useRoute</code>è·å–è·¯ç”±å‚æ•°å¯¹è±¡</span><span class="suffix" style="display: none;"></span></h4>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;onMounted&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useRoute&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue-router"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"home"</span>,<br>&nbsp;&nbsp;setup(props,&nbsp;context)&nbsp;{<br>&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;å¯ä»¥æ‹¿åˆ°æ‰€æœ‰å’Œè·¯ç”±ç›¸å…³çš„å‚æ•°</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;å’ŒuseRouter()å°±å·®ä¸€ä¸ªå­—æ¯rï¼ŒğŸ˜…</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$route&nbsp;=&nbsp;useRoute();&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">async</span>&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;data&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">await</span>&nbsp;ctx.$http.get(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">`http://test.happymmall.com/product/<span class="hljs-subst" style="color: #333; font-weight: normal; line-height: 26px;">${$route.params.id}</span>`</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$route,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>é…ç½®å®‰è£…vuex</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/store/index.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;createStore&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vuex'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;cart&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./modules/cart'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;search&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./modules/search'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;createStore({<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">modules</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;cart,<br>&nbsp;&nbsp;&nbsp;&nbsp;search<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">strict</span>:&nbsp;process.env.NODE_ENV&nbsp;!==&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'production'</span><br>})<br><br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨æ–‡ä»¶ä¸­ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useStore&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vuex"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;reactive,&nbsp;getCurrentInstance&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><br>setup(props,&nbsp;context)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$store&nbsp;=&nbsp;useStore();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ctx.$store&nbsp;===&nbsp;$store&nbsp;&nbsp;==&gt;true&nbsp;å…¶å®æ˜¯åŒä¸€ä¸ªå¯¹è±¡ï¼</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;ball&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">show</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">el</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">""</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;addToCart&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">event,&nbsp;tag</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$store.commit(<span class="hljs-string" style="color: #d14; line-height: 26px;">"cart/addToCart"</span>,&nbsp;tag);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ball.show&nbsp;=&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ball.el&nbsp;=&nbsp;event.target;<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...toRefs(ball),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addToCart,<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨å…¥å£æ–‡ä»¶<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">main.js</code>ä¸­ä½¿ç”¨ï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;createApp&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;App&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./App.vue'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;router&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./router'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;store&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'./store'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'lib-flexible/flexible'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;Vant&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vant'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vant/lib/index.css'</span>&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;å…¨å±€å¼•å…¥æ ·å¼</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;app&nbsp;=&nbsp;createApp(App);<br>app.use(Vant).use(store).use(router).mount(<span class="hljs-string" style="color: #d14; line-height: 26px;">'#app'</span>);<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>ä½¿ç”¨<code>svg-sprite-loader</code>å¤„ç†svgæ–‡ä»¶</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">é¦–å…ˆåœ¨<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">vue.config.js</code>ä¸­é…ç½®<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">svg-sprite-loader</code>:</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;">module.exports&nbsp;=&nbsp;{<br>&nbsp;&nbsp;&nbsp;chainWebpack:&nbsp;config&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;svgRule&nbsp;=&nbsp;config.module.rule(<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;svgRule.uses.clear();<br>&nbsp;&nbsp;&nbsp;&nbsp;svgRule<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.use(<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-sprite-loader"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.loader(<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-sprite-loader"</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.options({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;symbolId:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"icon-[name]"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.end();<br>&nbsp;&nbsp;},<br>}<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">src/components/SvgIcon/index.vue</code>ä¸­:</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;computed,&nbsp;toRefs,&nbsp;toRef&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-icon"</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">props</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">iconClass</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">type</span>:&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">String</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">required</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span><br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">className</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">type</span>:&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">String</span><br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup(initProps)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;const&nbsp;{&nbsp;iconClass&nbsp;}&nbsp;=&nbsp;initProps;âŒ</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;å› ä¸º&nbsp;props&nbsp;æ˜¯å“åº”å¼çš„ï¼Œä½ ä¸èƒ½ä½¿ç”¨&nbsp;ES6&nbsp;è§£æ„ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆé™¤&nbsp;prop&nbsp;çš„å“åº”æ€§ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;å¦‚æœéœ€è¦è§£æ„&nbsp;propï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨&nbsp;setup&nbsp;å‡½æ•°ä¸­çš„&nbsp;toRefs&nbsp;æ¥å®Œæˆæ­¤æ“ä½œï¼š</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;iconClass&nbsp;}&nbsp;=&nbsp;toRefs(initProps);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;iconName&nbsp;=&nbsp;computed(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">`#icon-<span class="hljs-subst" style="color: #333; font-weight: normal; line-height: 26px;">${iconClass.value}</span>`</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ç”±äº&nbsp;className&nbsp;æ˜¯å¯é€‰çš„&nbsp;propï¼Œåˆ™ä¼ å…¥çš„&nbsp;props&nbsp;ä¸­å¯èƒ½æ²¡æœ‰&nbsp;className&nbsp;ã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒtoRefs&nbsp;å°†ä¸ä¼šä¸º&nbsp;className&nbsp;åˆ›å»ºä¸€ä¸ª&nbsp;ref&nbsp;ï¼Œéœ€è¦ä½¿ç”¨&nbsp;toRef&nbsp;æ›¿ä»£å®ƒã€‚</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;className&nbsp;=&nbsp;toRef(initProps,&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"className"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;svgClass&nbsp;=&nbsp;computed(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(className)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-icon&nbsp;"</span>&nbsp;+&nbsp;className.value;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"svg-icon"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;iconName,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;svgClass<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">å°†è¿™ä¸ªå†™æˆä¸€ä¸ªæ’ä»¶ï¼Œç»Ÿä¸€å°†æ‰€æœ‰çš„svgæ–‡ä»¶æ³¨å†Œæˆç»„ä»¶çš„å½¢å¼æ–¹ä¾¿å…¨å±€ä½¿ç”¨ï¼</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/icons/index.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;SvgIcon&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'@/components/SvgIcon'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;requireAll&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">requireContext</span>&nbsp;=&gt;</span>&nbsp;requireContext.keys().map(requireContext)<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;app.component(<span class="hljs-string" style="color: #d14; line-height: 26px;">'svg-icon'</span>,&nbsp;SvgIcon);<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;req&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'./svgs/'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>,&nbsp;/\.svg$/)<br>&nbsp;&nbsp;&nbsp;&nbsp;requireAll(req)<br>&nbsp;&nbsp;}<br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>ç»Ÿä¸€æ³¨å†Œæ‰€æœ‰ç»„ä»¶</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">src/components/index.js</code>æ–‡ä»¶ä¸­ï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">capitalizeFirstLetter</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;str.charAt(<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>).toUpperCase()&nbsp;+&nbsp;str.slice(<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)<br>}<br><br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">validateFileName</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\.vue$/</span>.test(str)&nbsp;&amp;&amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;str.replace(<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\/(\w+)\.vue$/</span>,&nbsp;(rs,&nbsp;$<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)&nbsp;=&gt;&nbsp;capitalizeFirstLetter($<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>))<br>}<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;requireComponent&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'.'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>,&nbsp;/\.vue$/)<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;requireComponent.keys().forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">filePath</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentConfig&nbsp;=&nbsp;requireComponent(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;fileName&nbsp;=&nbsp;validateFileName(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentName&nbsp;=&nbsp;fileName.toLowerCase()&nbsp;===&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'index'</span>&nbsp;?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capitalizeFirstLetter(componentConfig.default.name)&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.component(componentName,&nbsp;componentConfig.default&nbsp;||&nbsp;componentConfig)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;}<br>}<br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">capitalizeFirstLetter</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;str.charAt(<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>).toUpperCase()&nbsp;+&nbsp;str.slice(<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)<br>}<br><br><span class="hljs-function" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">function</span>&nbsp;<span class="hljs-title" style="color: #900; font-weight: bold; line-height: 26px;">validateFileName</span>(<span class="hljs-params" style="line-height: 26px;">str</span>)&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\.vue$/</span>.test(str)&nbsp;&amp;&amp;<br>&nbsp;&nbsp;&nbsp;&nbsp;str.replace(<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/^\S+\/(\w+)\.vue$/</span>,&nbsp;(rs,&nbsp;$<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)&nbsp;=&gt;&nbsp;capitalizeFirstLetter($<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>))<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;requireComponent&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">require</span>.context(<span class="hljs-string" style="color: #d14; line-height: 26px;">'.'</span>,&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>,&nbsp;/\.vue$/)<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;requireComponent.keys().forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">filePath</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentConfig&nbsp;=&nbsp;requireComponent(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;fileName&nbsp;=&nbsp;validateFileName(filePath)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;componentName&nbsp;=&nbsp;fileName.toLowerCase()&nbsp;===&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'index'</span>&nbsp;?<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capitalizeFirstLetter(componentConfig.default.name)&nbsp;:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fileName<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.component(componentName,&nbsp;componentConfig.default&nbsp;||&nbsp;componentConfig)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;}<br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>é…ç½®å…¨å±€<code>axios</code>å°è£…å¼‚æ­¥è¯·æ±‚ï¼š</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/plugins/axios.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;axios&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'axios'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;router&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'../router/index'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;Toast&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vant'</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;tip&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">msg</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;Toast({<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">message</span>:&nbsp;msg,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">duration</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1000</span>,<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">forbidClick</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span><br>&nbsp;&nbsp;})<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;errorHandle&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">status,&nbsp;other</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">switch</span>&nbsp;(status)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">case</span>&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">401</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toLogin()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">case</span>&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">403</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tip(<span class="hljs-string" style="color: #d14; line-height: 26px;">'ç™»å½•è¿‡æœŸï¼Œè¯·é‡æ–°ç™»å½•'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;localStorage.removeItem(<span class="hljs-string" style="color: #d14; line-height: 26px;">'token'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setTimeout(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;toLogin()<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;},&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1000</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">case</span>&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">404</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tip(<span class="hljs-string" style="color: #d14; line-height: 26px;">'è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨'</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">break</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">default</span>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">console</span>.log(other)<br>&nbsp;&nbsp;}<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;instance&nbsp;=&nbsp;axios.create({<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">baseURL</span>:&nbsp;process.env.VUE_APP_BASE_URL,<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;baseURL:&nbsp;'',</span><br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">timeout</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1000</span>&nbsp;*&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">12</span><br>})<br>instance.defaults.headers.post[<span class="hljs-string" style="color: #d14; line-height: 26px;">'Content-Type'</span>]&nbsp;=&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'application/x-www-form-urlencoded;charset=UTF-8'</span><br>instance.interceptors.request.use(<br>&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">config</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;token&nbsp;=&nbsp;localStorage.token<br>&nbsp;&nbsp;&nbsp;&nbsp;token&nbsp;&amp;&amp;&nbsp;(config.headers.token&nbsp;=&nbsp;token)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;config<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;error&nbsp;=&gt;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.error(error))<br><br><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;å“åº”æ‹¦æˆªå™¨</span><br>instance.interceptors.response.use(<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;è¯·æ±‚æˆåŠŸ</span><br>&nbsp;&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">response</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;response.status&nbsp;===&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">200</span>&nbsp;?&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.resolve(response)&nbsp;:&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.reject(response)<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;è¯·æ±‚å¤±è´¥</span><br>&nbsp;&nbsp;error&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;response<br>&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;=&nbsp;error<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(response)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;è¯·æ±‚å·²å‘å‡ºï¼Œä½†æ˜¯ä¸åœ¨2xxçš„èŒƒå›´</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;errorHandle(response.status,&nbsp;response.data.message)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Promise</span>.reject(response)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;})<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;install(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;è¿™å¯ä»¥ä»£æ›¿&nbsp;Vue&nbsp;2.x&nbsp;Vue.prototype&nbsp;åœ¨å•æ–‡ä»¶ä¸­ï¼Œå¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;const&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ctx.$httpè®¿é—®</span><br>&nbsp;&nbsp;&nbsp;&nbsp;app.config.globalProperties.$http&nbsp;=&nbsp;instance<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>å°è£…å…¨å±€eventBus</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">2.x</code>ä¸­ï¼Œ<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">Vue</code> å®ä¾‹å¯ç”¨äºè§¦å‘ç”±äº‹ä»¶è§¦å‘ API é€šè¿‡æŒ‡ä»¤å¼æ–¹å¼æ·»åŠ çš„å¤„ç†å‡½æ•° (<span class="span-inline-equation" style="cursor:pointer"><img class="Formula-image" data-eeimg="true" src alt="onï¼Œ" style="max-width: 100%; border-radius: 6px; display: block; margin: 20px auto; object-fit: contain; box-shadow: 2px 4px 7px #999;"></span>off å’Œ $once)ã€‚è¿™å¯ä»¥åˆ›å»º event hubï¼Œç”¨æ¥åˆ›å»ºåœ¨æ•´ä¸ªåº”ç”¨ç¨‹åºä¸­å¯ç”¨çš„å…¨å±€äº‹ä»¶ç›‘å¬å™¨ï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/utils/eventBus.js</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;eventBus&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">new</span>&nbsp;Vue()<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;eventBus<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;"><code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">3.x</code>ä»å®ä¾‹ä¸­å®Œå…¨ç§»é™¤äº† <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$on</code>ã€<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$off</code> å’Œ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$once</code> æ–¹æ³•ã€‚<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">$emit</code> ä»ç„¶åŒ…å«äºç°æœ‰çš„ API ä¸­ï¼Œå› ä¸ºå®ƒç”¨äºè§¦å‘ç”±çˆ¶ç»„ä»¶å£°æ˜å¼æ·»åŠ çš„äº‹ä»¶å¤„ç†å‡½æ•°ã€‚
å¯ä»¥ä½¿ç”¨å®ç°äº†äº‹ä»¶è§¦å‘æ¥å£çš„å¤–éƒ¨åº“æ¥æ›¿æ¢ç°æœ‰çš„ event hubï¼Œä¾‹å¦‚ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">mitt</code> æˆ– <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">tiny-emitter</code>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">æ‰€ä»¥éœ€è¦åœ¨<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">2.x</code>çš„åŸºç¡€ä¸Šè¿›è¡Œè‡ªæˆ‘æ”¹é€ (æ²¡æœ‰ä½¿ç”¨ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">mitt</code> æˆ– <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">tiny-emitter</code>):</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;getCurrentInstance&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue'</span><br><br><span class="hljs-class" style="line-height: 26px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">class</span>&nbsp;<span class="hljs-title" style="color: #458; font-weight: bold; line-height: 26px;">EventBus</span>&nbsp;</span>{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">constructor</span>(app)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(!<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">Object</span>.defineProperty(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>,&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'handles'</span>,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">value</span>:&nbsp;{},<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">enumerable</span>:&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.app&nbsp;=&nbsp;app<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;_uidå’ŒEventNameçš„æ˜ å°„</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid&nbsp;=&nbsp;{}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;setEventMapUid(uid,&nbsp;eventName)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(!<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid]&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid].push(eventName)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;æŠŠæ¯ä¸ª_uidè®¢é˜…çš„äº‹ä»¶åå­—pushåˆ°å„è‡ªuidæ‰€å±çš„æ•°ç»„é‡Œ</span><br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$on(eventName,&nbsp;callback,&nbsp;vm)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;vmæ˜¯åœ¨ç»„ä»¶å†…éƒ¨ä½¿ç”¨æ—¶ç»„ä»¶å½“å‰çš„thisç”¨äºå–_uid</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(!<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName]&nbsp;=&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName].push(callback)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.setEventMapUid(vm._uid,&nbsp;eventName)<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$emit()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;args&nbsp;=&nbsp;[...arguments]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;eventName&nbsp;=&nbsp;args[<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>]<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;params&nbsp;=&nbsp;args.slice(<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>)<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName])&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;len&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName].length<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">for</span>&nbsp;(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;i&nbsp;=&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span>;&nbsp;i&nbsp;&lt;&nbsp;len;&nbsp;i++)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName][i](...params)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$offVmEvent(uid)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;currentEvents&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.eventMapUid[uid]&nbsp;||&nbsp;[]<br>&nbsp;&nbsp;&nbsp;&nbsp;currentEvents.forEach(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">event</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.$off(event)<br>&nbsp;&nbsp;&nbsp;&nbsp;})<br>&nbsp;&nbsp;}<br>&nbsp;&nbsp;$off(eventName)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">delete</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.handles[eventName]<br>&nbsp;&nbsp;}<br>}<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">let</span>&nbsp;$EventBus&nbsp;=&nbsp;{}<br>$EventBus.install&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">app</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;app.config.globalProperties.$eventBus&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">new</span>&nbsp;EventBus(app)<br>&nbsp;&nbsp;app.mixin({<br>&nbsp;&nbsp;&nbsp;&nbsp;beforeUnmount()&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;currentInstance&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;æ‹¦æˆªbeforeUnmounté’©å­,è‡ªåŠ¨é”€æ¯è‡ªèº«æ‰€æœ‰è®¢é˜…çš„äº‹ä»¶</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">this</span>.$eventBus.$offVmEvent(currentInstance._uid)<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;})<br>}<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;$EventBus<br></code></pre>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">src/views/classify/index.vue</code>æ–‡ä»¶ä¸­ä½¿ç”¨å¦‚ä¸‹ï¼š</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;ListScroll&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"@/components/scroll/ListScroll"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;ref,&nbsp;reactive,&nbsp;onMounted,&nbsp;toRefs,&nbsp;getCurrentInstance&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;useRouter&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue-router"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"classify"</span>,<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">components</span>:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;ListScroll<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;$router&nbsp;=&nbsp;useRouter();<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;searchWrap&nbsp;=&nbsp;ref(<span class="hljs-literal" style="color: #008080; line-height: 26px;">null</span>);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;state&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">categoryDatas</span>:&nbsp;[],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">currentIndex</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;selectMenu&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">index</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.currentIndex&nbsp;=&nbsp;index;<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;setSearchWrapHeight&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;clientHeight&nbsp;}&nbsp;=&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">document</span>.documentElement;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchWrap.value.style.height&nbsp;=&nbsp;clientHeight&nbsp;-&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">100</span>&nbsp;+&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"px"</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;selectProduct&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">sku</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;$router.push({&nbsp;<span class="hljs-attr" style="line-height: 26px;">path</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"/classify/recommend"</span>,&nbsp;<span class="hljs-attr" style="line-height: 26px;">query</span>:&nbsp;{&nbsp;sku&nbsp;}&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br><br>&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">async</span>&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setSearchWrapHeight();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ä½¿ç”¨å…¨å±€æ³¨è¿‡çš„$eventBus</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctx.$eventBus.$emit(<span class="hljs-string" style="color: #d14; line-height: 26px;">"changeTag"</span>,&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">1</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;ä½¿ç”¨å…¨å±€æ³¨å†Œè¿‡çš„$http</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;data&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">await</span>&nbsp;ctx.$http.get(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"http://test.happymmall.com/category/categoryData"</span><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;categoryData&nbsp;}&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.categoryDatas&nbsp;=&nbsp;categoryData;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;searchWrap,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...toRefs(state),<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectProduct,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;selectMenu<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>å°è£…ä¸ªç®€å•çš„hooksï¼š<code>useClickOutside</code></span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-comment" style="color: #998; font-style: italic; line-height: 26px;">//&nbsp;src/hooks/useClickOutside.js</span><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;onMounted,&nbsp;onUnmounted,&nbsp;ref&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"vue"</span>;<br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;useClickOutSide&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">domRef</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;isOutside&nbsp;=&nbsp;ref(<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>);<br><br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;handler&nbsp;=&nbsp;<span class="hljs-function" style="line-height: 26px;">(<span class="hljs-params" style="line-height: 26px;">event</span>)&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(domRef.value)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">if</span>&nbsp;(domRef.value.contains(event.target))&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isOutside.value&nbsp;=&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">false</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">else</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;isOutside.value&nbsp;=&nbsp;<span class="hljs-literal" style="color: #008080; line-height: 26px;">true</span>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;}<br><br>&nbsp;&nbsp;onMounted(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">document</span>.addEventListener(<span class="hljs-string" style="color: #d14; line-height: 26px;">'click'</span>,&nbsp;handler);<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;onUnmounted(<span class="hljs-function" style="line-height: 26px;"><span class="hljs-params" style="line-height: 26px;">()</span>&nbsp;=&gt;</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-built_in" style="color: #0086b3; line-height: 26px;">document</span>.removeEventListener(<span class="hljs-string" style="color: #d14; line-height: 26px;">'click'</span>,&nbsp;handler);<br>&nbsp;&nbsp;});<br><br>&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;isOutside;<br>}<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>ä½¿ç”¨ this</span><span class="suffix" style="display: none;"></span></h3>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">åœ¨ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> å†…éƒ¨ï¼Œ<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">this</code> ä¸ä¼šæ˜¯è¯¥æ´»è·ƒå®ä¾‹çš„å¼•ç”¨ï¼Œå› ä¸º <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> æ˜¯åœ¨è§£æå…¶å®ƒç»„ä»¶é€‰é¡¹ä¹‹å‰è¢«è°ƒç”¨çš„ï¼Œæ‰€ä»¥ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> å†…éƒ¨çš„ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">this</code> çš„è¡Œä¸ºä¸å…¶å®ƒé€‰é¡¹ä¸­çš„ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">this</code> å®Œå…¨ä¸åŒã€‚è¿™åœ¨å’Œå…¶å®ƒé€‰é¡¹å¼ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">API</code> ä¸€èµ·ä½¿ç”¨ <code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">setup()</code> æ—¶å¯èƒ½ä¼šå¯¼è‡´æ··æ·†ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">å¯ä»¥é€šè¿‡<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">getCurrentInstance</code>è·å–å½“å‰å•ä¸ªæ–‡ä»¶ç»„ä»¶çš„å®ä¾‹ï¼ŒåŒæ—¶<code style="font-size: 14px; word-wrap: break-word; margin: 0 2px; background-color: rgba(27,31,35,.05); font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; word-break: break-all; color: #3594F7; background: RGBA(59, 170, 250, .1); padding: 0 2px; border-radius: 2px; height: 21px; line-height: 22px;">ctx</code>ä¸Šé¢æŒ‚åœ¨äº†ä¸€äº›å…¨å±€å±æ€§:</p>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;"><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">import</span>&nbsp;{&nbsp;getCurrentInstance,&nbsp;&nbsp;onMounted,&nbsp;reactive,&nbsp;toRefs&nbsp;}&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">from</span>&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">'vue'</span><br><br><span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">export</span>&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">default</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">name</span>:&nbsp;<span class="hljs-string" style="color: #d14; line-height: 26px;">"classify"</span>,<br>&nbsp;&nbsp;setup(props)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;ctx&nbsp;}&nbsp;=&nbsp;getCurrentInstance();<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;state&nbsp;=&nbsp;reactive({<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">categoryDatas</span>:&nbsp;[],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-attr" style="line-height: 26px;">currentIndex</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">0</span><br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;onMounted(<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">async</span>&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;data&nbsp;}&nbsp;=&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">await</span>&nbsp;ctx.$http.get(<span class="hljs-string" style="color: #d14; line-height: 26px;">"http://test.happymmall.com/category/categoryData"</span>);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">const</span>&nbsp;{&nbsp;categoryData,&nbsp;page&nbsp;}&nbsp;=&nbsp;data;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.categoryDatas&nbsp;=&nbsp;categoryData;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;state.currentIndex&nbsp;=&nbsp;page;<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;<br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-keyword" style="color: #333; font-weight: bold; line-height: 26px;">return</span>&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;...toRefs(state)<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;}<br>};<br></code></pre>
<h3 data-tool="mdniceç¼–è¾‘å™¨" style="padding: 0px; color: black; font-size: 17px; font-weight: bold; text-align: center; position: relative; margin-top: 20px; margin-bottom: 20px;"><span class="prefix" style="display: none;"></span><span class="content" style="border-bottom: 2px solid RGBA(79, 177, 249, .65); color: #2b2b2b; padding-bottom: 2px;"><span style="width: 30px; height: 30px; display: block; background-image: url(https://files.mdnice.com/fullstack-2.png); background-position: center; background-size: 30px; margin: auto; opacity: 1; background-repeat: no-repeat; margin-bottom: -8px;"></span>ğŸ“¦ å°è£…better-scroll</span><span class="suffix" style="display: none;"></span></h3>
<pre class="custom" data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 10px; margin-bottom: 10px; border-radius: 5px; box-shadow: rgba(0, 0, 0, 0.55) 0px 2px 10px;"><span style="display: block; background: url(https://files.mdnice.com/point.png); height: 30px; width: 100%; background-size: 40px; background-repeat: no-repeat; background-color: #f8f8f8; margin-bottom: -7px; border-radius: 5px; background-position: 10px 10px;"></span><code class="hljs" style="overflow-x: auto; padding: 16px; color: #333; display: -webkit-box; font-family: Operator Mono, Consolas, Monaco, Menlo, monospace; font-size: 12px; -webkit-overflow-scrolling: touch; letter-spacing: 0px; padding-top: 15px; background: #f8f8f8; border-radius: 5px;">&lt;template&gt;<br>&nbsp;&nbsp;<span class="xml" style="line-height: 26px;"><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">div</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">ref</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"wrapper"</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">class</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"scroll-wrapper"</span>&gt;</span><br>&nbsp;&nbsp;&nbsp;&nbsp;<span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">slot</span>&gt;</span><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;/<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">slot</span>&gt;</span><br>&nbsp;&nbsp;<span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;/<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">div</span>&gt;</span></span><br>&lt;<span class="hljs-regexp" style="color: #009926; line-height: 26px;">/template&gt;<br>&lt;script&gt;<br>import&nbsp;BScroll&nbsp;from&nbsp;"better-scroll";<br>import&nbsp;{&nbsp;onMounted,&nbsp;nextTick,&nbsp;ref,&nbsp;watchEffect&nbsp;}&nbsp;from&nbsp;"vue";<br>export&nbsp;default&nbsp;{<br>&nbsp;&nbsp;props:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;probeType:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;1<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;click:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;true<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;scrollX:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;listenScroll:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;scrollData:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Array,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;null<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;pullup:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;pulldown:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;beforeScroll:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Boolean,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;false<br>&nbsp;&nbsp;&nbsp;&nbsp;},<br>&nbsp;&nbsp;&nbsp;&nbsp;refreshDelay:&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;type:&nbsp;Number,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;default:&nbsp;20<br>&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;},<br>&nbsp;&nbsp;setup(props,&nbsp;setupContext)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;wrapper&nbsp;=&nbsp;ref(null);<br><br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;initScroll&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!wrapper.value)&nbsp;return;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;scroll&nbsp;=&nbsp;new&nbsp;BScroll(wrapper.value,&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;probeType:&nbsp;props.probeType,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;click:&nbsp;props.click,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scrollX:&nbsp;props.scrollX<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;æ˜¯å¦æ´¾å‘æ»šåŠ¨äº‹ä»¶<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.listenScroll)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("scroll",&nbsp;pos&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("scroll",&nbsp;pos);<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;æ˜¯å¦æ´¾å‘æ»šåŠ¨åˆ°åº•éƒ¨äº‹ä»¶ï¼Œç”¨äºä¸Šæ‹‰åŠ è½½<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.pullup)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("scrollEnd",&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;æ»šåŠ¨åˆ°åº•éƒ¨<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(scroll.y&nbsp;&lt;=&nbsp;scroll.maxScrollY&nbsp;+&nbsp;50)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("scrollToEnd");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;æ˜¯å¦æ´¾å‘é¡¶éƒ¨ä¸‹æ‹‰äº‹ä»¶ï¼Œç”¨äºä¸‹æ‹‰åˆ·æ–°<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.pulldown)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("touchend",&nbsp;pos&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;ä¸‹æ‹‰åŠ¨ä½œ<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(pos.y&nbsp;&gt;&nbsp;50)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("pulldown");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;æ˜¯å¦æ´¾å‘åˆ—è¡¨æ»šåŠ¨å¼€å§‹çš„äº‹ä»¶<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(props.beforeScroll)&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll.on("beforeScrollStart",&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setupContext.emit("beforeScroll");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;disable&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;ä»£ç†better-scrollçš„disableæ–¹æ³•<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.disable();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;enable&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;ä»£ç†better-scrollçš„enableæ–¹æ³•<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.enable();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;refresh&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;ä»£ç†better-scrollçš„refreshæ–¹æ³•<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.refresh();<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;scrollTo&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;ä»£ç†better-scrollçš„scrollToæ–¹æ³•<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.scrollTo.apply(scroll,&nbsp;arguments);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;const&nbsp;scrollToElement&nbsp;=&nbsp;()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;/</span><span class="hljs-regexp" style="color: #009926; line-height: 26px;">/&nbsp;ä»£ç†better-scrollçš„scrollToElementæ–¹æ³•<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;scroll?.scrollToElement.apply(scroll,&nbsp;arguments);<br>&nbsp;&nbsp;&nbsp;&nbsp;};<br>&nbsp;&nbsp;&nbsp;&nbsp;onMounted(()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nextTick(()&nbsp;=&gt;&nbsp;{<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initScroll();<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;});<br>&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;{};<br>&nbsp;&nbsp;}<br>};<br>&lt;/</span>script&gt;<br><span class="xml" style="line-height: 26px;"><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">style</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">lang</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"scss"</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">type</span>=<span class="hljs-string" style="color: #d14; line-height: 26px;">"text/scss"</span>&nbsp;<span class="hljs-attr" style="color: #008080; line-height: 26px;">scoped</span>&gt;</span><span class="css" style="line-height: 26px;"><br><span class="hljs-selector-class" style="line-height: 26px;">.scroll-wrapper</span>&nbsp;{<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">width</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">100%</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">height</span>:&nbsp;<span class="hljs-number" style="color: #008080; line-height: 26px;">100%</span>;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">overflow</span>:&nbsp;hidden;<br>&nbsp;&nbsp;<span class="hljs-attribute" style="color: #000080; font-weight: normal; line-height: 26px;">overflow-y</span>:&nbsp;scroll;<br>}<br></span><span class="hljs-tag" style="color: #000080; font-weight: normal; line-height: 26px;">&lt;/<span class="hljs-name" style="color: #000080; font-weight: normal; line-height: 26px;">style</span>&gt;</span></span><br><br></code></pre>
<h2 data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 30px; margin-bottom: 15px; padding: 0px; font-weight: bold; color: black; font-size: 22px; display: block; border-bottom: 4px solid #40B8FA;"><span class="prefix" style="display: flex; width: 20px; height: 20px; background-size: 20px 20px; background-image: url(https://files.mdnice.com/fullstack-1.png); margin-bottom: -22px;"></span><span class="content" style="display: flex; color: #40B8FA; font-size: 20px; margin-left: 25px;">æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚</span><span class="suffix" style="display: flex; box-sizing: border-box; width: 200px; height: 10px; border-top-left-radius: 20px; background: RGBA(64, 184, 250, .5); color: rgb(255, 255, 255); font-size: 16px; letter-spacing: 0.544px; justify-content: flex-end; float: right; margin-top: -10px; box-sizing: border-box !important; overflow-wrap: break-word !important;"></span></h2>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">ç”±äºæ—¶é—´å…³ç³»å…ˆå†™åˆ°è¿™é‡Œäº†ï¼Œæ˜å¤©è¿˜è¦ä¸Šç­ï¼Œè¿™ä¸ªé¡¹ç›®ä»…ä»…åªæ˜¯ç”¨æ¥ç»ƒä¹ vue3ç”¨çš„å°demoï¼Œé‡Œé¢è¿˜æœ‰éƒ¨åˆ†çš„ğŸ›ï¼Œéšæ—¶æ¬¢è¿å„ä½å°ä¼™ä¼´æå‡ºåˆ†äº«æ„è§ï¼githubä»£ç ç‚¹å‡»<a href="https://github.com/GitHubGanKai/vue3-jd-h5" style="text-decoration: none; word-wrap: break-word; color: #40B8FA; font-weight: normal; border-bottom: 1px solid #3BAAFA;">è¿™é‡Œ</a>ã€‚</p>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">â¤ï¸ çœ‹å®Œä¸‰ä»¶äº‹:
å¦‚æœä½ è§‰å¾—è¿™ç¯‡å†…å®¹å¯¹ä½ æŒºæœ‰å¯å‘ï¼Œæˆ‘æƒ³é‚€è¯·ä½ å¸®æˆ‘ä¸ªå°å¿™ï¼š</p><p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;"></p>
<ol data-tool="mdniceç¼–è¾‘å™¨" style="margin-top: 8px; margin-bottom: 8px; padding-left: 25px; list-style-type: decimal; font-size: 15px; color: #595959;">
<li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">ç‚¹èµï¼Œè®©æ›´å¤šçš„äººä¹Ÿèƒ½çœ‹åˆ°è¿™ç¯‡å†…å®¹ï¼Œä¹Ÿæ–¹ä¾¿è‡ªå·±éšæ—¶æ‰¾åˆ°è¿™ç¯‡å†…å®¹ï¼ˆæ”¶è—ä¸ç‚¹èµï¼Œéƒ½æ˜¯è€æµæ°“ -_-ï¼‰ï¼›</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">å…³æ³¨æˆ‘ä»¬ï¼Œä¸å®šæœŸåˆ†å¥½æ–‡ç« ï¼›</section></li><li><section style="margin-top: 5px; margin-bottom: 5px; line-height: 26px; text-align: left; font-size: 14px; font-weight: normal; color: #595959;">ä¹Ÿçœ‹çœ‹å…¶å®ƒæ–‡ç« ï¼›</section></li></ol>
<p data-tool="mdniceç¼–è¾‘å™¨" style="padding-top: 8px; padding-bottom: 8px; line-height: 26px; color: #2b2b2b; margin: 10px 0px; letter-spacing: 2px; font-size: 14px; word-spacing: 2px;">ğŸ‰æ¬¢è¿ä½ æŠŠè‡ªå·±çš„å­¦ä¹ ä½“ä¼šå†™åœ¨ç•™è¨€åŒºï¼Œä¸æˆ‘å’Œå…¶ä»–åŒå­¦ä¸€èµ·è®¨è®ºã€‚å¦‚æœä½ è§‰å¾—æœ‰æ‰€æ”¶è·ï¼Œä¹Ÿæ¬¢è¿æŠŠæ–‡ç« åˆ†äº«ç»™ä½ çš„æœ‹å‹ã€‚</p>
</section>